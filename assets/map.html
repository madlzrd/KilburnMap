<!DOCTYPE html>
<html>
<head>

	<meta charset="utf-8">
	<title>Map of Kilburn</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<!-- Font Awesome -->
	<link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" rel="stylesheet">
	<!-- Leaflet files -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
	   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
	   crossorigin=""/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.css"/>
	<link href="leaflet-sidebar.css" rel="stylesheet" type="text/css">
	<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
	   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
	   crossorigin=""></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.js"></script>

	<!-- jquery and linking css -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<link href="StyleSheet_DevMap.css" rel="stylesheet" type="text/css">
	
	<!-- Leaflet-sidebar-v2 -->
	<script src='leaflet-sidebar.js'></script>
	
</head>


<body>
	
	<div id="sidebar" class="sidebar collapsed">
        <!-- Nav tabs -->
        <div class="sidebar-tabs">
            <ul role="tablist">
				<li><a href="javascript:zoomin()" role="tab"><i class="fas fa-plus"></i></a></li>
                <li><a href="javascript:zoomout()" role="tab"><i class="fas fa-minus"></i></a></li>
				<br><br>
				<li><a href="#layertab" role="tab"><i class="fas fa-layer-group"></i></a></li>
				<br>
				<li><a href="javascript:anchorview()" role="tab"><i class="fas fa-anchor"></i></a></li>
				<li><a href="#info" role="tab"><i class="fas fa-info-circle"></i></a></li>
			</ul>
        </div>

        <!-- Tab panes -->
        <div class="sidebar-content">
            <div class="sidebar-pane" id="info">
                <h1 class="sidebar-header">
                    Map of West Camden Wards 1912-2019
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
				<br><br>
				<p style="font-size:1.25em">To get started Press the <i class="fas fa-layer-group"></i> Layers tab on the left and select the Year for which you would like to see boundaries of Western Camden Wards.</p>
				<p style="font-size:1.25em">Press the <i class="fas fa-anchor"></i> Anchor Tab to reposition the map to the default view of Kilburn.</p>
				<br><br>
				<button class="button" onclick="toggleHidden('DivInfo1')" style="width:100%; border-radius:8px;"><p style="text-align: left; font-size: 1.1em">
				How the maps were created: </p></button>
				<div id="DivInfo1" style="display: none">
					<h3>1912-1977</h3>
					<p>The first two maps were derived from Ordnance Survery maps of Greater London, which you can see for yourself here on the National Library of Scotland's Website: <br>
					<a href="https://maps.nls.uk/view/196759673">OS map 1947</a>
					<a href="https://maps.nls.uk/view/196759670">OS map 1957</a></p>
					<h3>1977-2002</h3>
					<p>The boundaries between 1977-2002 were far harder to determine.<br> Historical OS maps are only available online for dates prior to around 1960, as far as I am aware.<br>
					Therefore we resorted to using the <a href="https://madlzrd.github.io/KilburnMap/Ward%20Boundaries/1977%20report.pdf">Local Government Boundary report from 1977</a>, which detailed the delimitation of the future boundaries (at the end of the document),
					and a map from the <a href="https://madlzrd.github.io/KilburnMap/Ward%20Boundaries/1999%20report.pdf">2002 LGBCE draft proposal</a> which showed a representaion of the boundaries as they were.</p>
					<h3>2002-Present</h3>
					<p>Present day boundaries were taken directly from the <a href="https://opendata.camden.gov.uk/Maps/Camden-Ward-Boundary/yqyi-6agf">Open Data Camden Website</a> and as such these boundaries are probably the most accurate of the bunch, being created by an official body.</p>
				</div>
			</div>

            <div class="sidebar-pane" id="layertab">
                <h1 class="sidebar-header">Layers<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
				<br>
				<button class="button" onclick="toggleHidden('Div1')" style="width:100%; border-radius:8px;"><p style="text-align: left; font-size: 1.1em">
				Wards of West Camden 1912-present</p></button>
				<div id="Div1" style="font-size: 1.25em;cursor:'pointer';">
				<br>			
					<div id="Div2">
						<i class="fa fa-plus point"></i><div id="Div2_0" class="l3checkP" style="display:inline;margin-left:1em;"><i class="far fa-square"></i>
						1912-1955 - Hampstead Borough</div>
						<div style="display:none; margin-left:3em">
							<div id="Div2_1" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Kilburn Ward</div>
							<br>
							<div id="Div2_2" class="l4check" style="display:inline"><i class="far fa-square"></i>
							West End Ward</div>
							<br>
							<div id="Div2_3" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Central Ward</div>
							<br>
							<div id="Div2_4" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Priory Ward</div>
						</div>
					</div>
					
					<div id="Div3">
						<i class="fa fa-plus point"></i><div id="Div3_0" class="l3checkP" style="display:inline;margin-left:1em;"><i class="far fa-square"></i>
						1955-1977 - Camden Borough</div>
						<div style="display:none; margin-left:3em">
							<div id="Div3_1" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Kilburn Ward</div>
							<br>
							<div id="Div3_2" class="l4check" style="display:inline"><i class="far fa-square"></i>
							West End Ward</div>
							<br>
							<div id="Div3_3" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Hampstead Central Ward</div>
							<br>
							<div id="Div3_4" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Priory Ward</div>
						</div>
					</div>
					
					<div id="Div4">
						<i class="fa fa-plus point"></i><div id="Div4_0" class="l3checkP" style="display:inline;margin-left:1em;"><i class="far fa-square"></i>
						1977-2002 - Camden Borough</div>
						<div style="display:none; margin-left:3em">
							<div id="Div4_1" class="l4check C1" style="display:inline"><i class="far fa-square"></i>
							Kilburn Ward</div>
							<br>
							<div id="Div4_2" class="l4check C1" style="display:inline"><i class="far fa-square"></i>
							West End Ward</div>
							<br>
							<div id="Div4_3" class="l4check C1" style="display:inline"><i class="far fa-square"></i>
							Fortune Green Ward</div>
							<br>
							<div id="Div4_4" class="l4check C1" style="display:inline"><i class="far fa-square"></i>
							Priory Ward</div>
							<br>
							<div id="Div4_5" class="l4check C1" style="display:inline"><i class="far fa-square"></i>
							Swiss Cottage Ward</div>
						</div>
					</div>
					
					<div id="Div5">
						<i class="fa fa-plus point"></i><div id="Div5_0" class="l3checkP" style="display:inline;margin-left:1em;"><i class="far fa-square"></i>
						2002-2020 - Camden Borough</div>
						<div style="display:none; margin-left:3em">
							<div id="Div5_1" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Kilburn Ward</div>
							<br>
							<div id="Div5_2" class="l4check" style="display:inline"><i class="far fa-square"></i>
							West Hampstead Ward</div>
							<br>
							<div id="Div5_3" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Fortune Green Ward</div>
							<br>
							<div id="Div5_4" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Swiss Cottage Ward</div>
						</div>
					</div>
					
				</div>
				<br><br><br>
				<hr>
				<br>
				<table width="50%" align="center">
					<tbody>
					<tr>
						<td width="40%"><img src="images/SatOff.png" id="picSat" onclick="changeLayer('satellite')" height="54px"></td>
						<td width="10%"></td>
						<td width="40%"><img src="images/StreetOn.png" id="picStreet" onclick="changeLayer('streets')" height="54px"></td>
					</tr>
					<tr>
						<td style="vertical-align:text-top">Satellite</td>
						<td></td>
						<td style="vertical-align:text-top">Street</td>
					</tr>
					</tbody></table>
			</div>

            
        </div>
    </div>

    <div id="mapid" class="sidebar-map"></div>



	<script>
	var mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		mbToken = "pk.eyJ1IjoidG9tcHlzciIsImEiOiJjazFndnplbjkwcmt3M2NxbHZ0OThicjdvIn0.PMGP9s0F7ldLt2HxTQDkSg",
		mbUrl = "https://api.mapbox.com/styles/v1/mapbox/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}";
		MINzoom = 14;
		if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)) {
		MINzoom -= 2;
		console.log("mobile device");
		}

	var streets = L.tileLayer(mbUrl, {
		attribution: mbAttr,
		accessToken: 'pk.eyJ1IjoidG9tcHlzciIsImEiOiJjazFndnplbjkwcmt3M2NxbHZ0OThicjdvIn0.PMGP9s0F7ldLt2HxTQDkSg',
		maxZoom: 18,
		tileSize: 512,
		zoomOffset: -1,
		id: 'streets-v11',	
		minZoom: MINzoom
		//detectRetina: true
		});
		

	var satellite = L.tileLayer(mbUrl, {
		attribution: mbAttr,
		accessToken: 'pk.eyJ1IjoidG9tcHlzciIsImEiOiJjazFndnplbjkwcmt3M2NxbHZ0OThicjdvIn0.PMGP9s0F7ldLt2HxTQDkSg',
		maxZoom: 18,
		tileSize: 512,
		zoomOffset: -1,
		id: 'satellite-streets-v9',	
		minZoom: MINzoom
		//detectRetina: true
		});
		
	var mymap = L.map('mapid', {
			center: [51.539829, -0.195229],
			zoom: 15,
			layers: [streets],
			zoomControl: false
	});
	
	var baseMaps = {
			"Default View": streets,
			"satellite View": satellite
	};

	</script>
	<script>
		// Zoom buttons
		function zoomin(){
			mymap.zoomIn(1)
		}
		function zoomout(){
			mymap.zoomOut(1)
		}
		function anchorview(){
			mymap.setView([51.539829, -0.195229], 15)
		}
		
		// Button Show/Hide
		function toggleHidden(divName) {
			var x = document.getElementById(divName);
			if (x.style.display === "none") {
				x.style.display = "block";
			} else {
				x.style.display = "none";
			}
		} 	
		
		//icon images
		var imageSat = document.getElementById('picSat');
		var imageStreet = document.getElementById('picStreet');
		//Changing Base Layers
		function changeLayer(layerName){
			switch(layerName){
				case "satellite":
				imageSat.src = "images/SatOn.png";
				imageStreet.src = "images/StreetOff.png";
				mymap.removeLayer(streets);
				mymap.addLayer(satellite);
				break;
				
				case "streets":
				imageStreet.src = "images/StreetOn.png";
				imageSat.src = "images/SatOff.png";
				mymap.removeLayer(satellite);
				mymap.addLayer(streets);
			}
		}
		
		//Change + to - 
		var i;
		for (i = 2; i < 7; i++) {
			$('#Div'+i.toString()+' button').click(function(){
			$(this).next().next('div').slideToggle('500');
			$(this).find('i').toggleClass('fa-plus fa-minus')
			});
		} 
		
	
		// jquery using class
			// changing icons
		function updateIcons(){
			$(".l3checkP").each(function(){
			//CheckBox Behaviour
				var e = $(this);
				var f = e.siblings().find(".l4check");
				e.removeClass("C2");
				if((f.not(".C1").length > 0) && (f.filter(".C1").length > 0)){
					e.removeClass("C0");
					e.addClass("C2");
				}else if(f.not(".C1").length == 0){
					if (!e.hasClass("C0")){
						e.toggleClass('C0').removeClass('C2')
					}
				}else if(f.filter(".C1").length == 0){
					if (!e.hasClass("C0")){
						e.removeClass('C0').removeClass('C2')
					}
				}
		
				if(e.hasClass('C0')){
					e.children('i').attr('class', 'far fa-check-square');
				}else if(e.hasClass('C2')){
					e.children('i').attr('class', 'far fa-minus-square');
				}else{
					e.children('i').attr('class', 'far fa-square');
				}
				
				f.each(function(){
					if($(this).hasClass('C1')){
						$(this).children('i').attr('class', 'far fa-check-square');
					}else{
						$(this).children('i').attr('class', 'far fa-square');
					}
					});
				});
			
			//Changing Layers
			var i,j;
			var e = $(".l3checkP");
			//console.log(e.length);
			for(i=0; i < e.length; i++){
				console.log(e.eq(i).length);
				<!-- // console.log(e.eq(i).attr('id')); -->
				var f = e.eq(i).siblings('div').children('div');
				for(j=0; j < f.length; j++){
					if(f.eq(j).hasClass('C1')){
						mymap.addLayer(LayerItem[i][j]);
					}else{mymap.removeLayer(LayerItem[i][j]);}
					//console.log(i.toString()+j.toString());
				}
			}
		}
		
		
			// click
		var Element = $(".l3checkP");
		Element.prev('i').click(function(event){
			event.stopPropagation();
			event.stopImmediatePropagation();
			$(this).nextUntil('i', '').next('div').slideToggle('500');
			$(this).toggleClass('fa-plus fa-minus')
			});
		$(".l3checkP").click(function(event){
			event.stopPropagation();
			event.stopImmediatePropagation();
			var Element = $(this);
			$(this).toggleClass('C0').removeClass('C2');
			$(this).siblings('div').children('div').each(function(){
					if(Element.hasClass('C0')){
						$(this).addClass('C1');
					}else{
						$(this).removeClass('C1');
					}
					});
			updateIcons();
			});
		$(".l4check").click(function(){
			$(this).toggleClass('C1');
			updateIcons();
			});
		
		
			
 	<!-- mymap.setMaxBounds([ -->
		<!-- [51.550552, -0.218611], -->
		<!-- [51.530426, -0.177397] -->
		<!-- ]);  -->
	<!--} -->



	</script>
	
	<script>
        // create the sidebar instance and add it to the map
        var sidebar = L.control.sidebar('sidebar')
            .addTo(mymap);

    
	</script>
	
	<script src="Markers.js"></script>
	
	<script>$(document).ready(function(){
					updateIcons()
				});
	</script>

	</body>
</html>
