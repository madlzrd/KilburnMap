<!DOCTYPE html>
<html>
<head>

	<meta charset="utf-8">
	<title>Map of Kilburn</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<!-- Font Awesome -->
	<link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" rel="stylesheet">
	<!-- Leaflet files -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
	   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
	   crossorigin=""/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.css"/>
	<link href="leaflet-sidebar.css" rel="stylesheet" type="text/css">
	<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
	   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
	   crossorigin=""></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.js"></script>

	<!-- jquery and linking css -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<link href="StyleSheet_DevMap.css" rel="stylesheet" type="text/css">
	
	<!-- Leaflet-sidebar-v2 -->
	<script src='leaflet-sidebar.js'></script>
	
</head>


<body>
	
	<div id="sidebar" class="sidebar collapsed">
        <!-- Nav tabs -->
        <div class="sidebar-tabs">
            <ul role="tablist">
				<li><a href="javascript:zoomin()" role="tab"><i class="fas fa-plus"></i></a></li>
                <li><a href="javascript:zoomout()" role="tab"><i class="fas fa-minus"></i></a></li>
				<br><br><br>
				<li><a href="#layertab" role="tab"><i class="fas fa-layer-group"></i></a></li>
				<br><br><br>
				<li><a href="#info" role="tab"><i class="fas fa-info-circle"></i></a></li>
			</ul>
        </div>

        <!-- Tab panes -->
        <div class="sidebar-content">
            <div class="sidebar-pane" id="info">
                <h1 class="sidebar-header">
                    Map of West Camden Wards 1912-2019
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
				<h2> Test </h2>
				<p> Wassup </p>
            </div>

            <div class="sidebar-pane" id="layertab">
                <h1 class="sidebar-header">Layers<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
				<br>
				<button class="button" onclick="toggleHidden('Div1')" style="width:100%; border-radius:8px;"><p style="text-align: left; font-size: 1.1em">Wards of SW Camden 1912-present</p></button>
				<div id="Div1" style="display: none;font-size: 1.25em;cursor:'pointer';">
				<br>			
					<div id="Div2">
						<i class="fa fa-plus point"></i><div id="Div2_0" class="l3checkP" style="display:inline;margin-left:1em;"><i class="far fa-square"></i>
						1912-1955 - Hampstead Borough</div>
						<div style="display:none; margin-left:3em">
							<div id="Div2_1" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Kilburn Ward</div>
							<br>
							<div id="Div2_2" class="l4check" style="display:inline"><i class="far fa-square"></i>
							West End Ward</div>
							<br>
							<div id="Div2_3" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Central Ward</div>
							<br>
							<div id="Div2_4" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Priory Ward</div>
						</div>
					</div>
					
					<div id="Div3_0">
						<i class="fa fa-plus point"></i><div id="Div3_0" class="l3checkP" style="display:inline;margin-left:1em;"><i class="far fa-square"></i>
						1955-1977 - Camden Borough</div>
						<div style="display:none; margin-left:3em">
							<div id="Div3_1" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Kilburn Ward</div>
							<br>
							<div id="Div3_2" class="l4check" style="display:inline"><i class="far fa-square"></i>
							West End Ward</div>
							<br>
							<div id="Div3_3" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Hampstead Central Ward</div>
							<br>
							<div id="Div3_4" class="l4check" style="display:inline"><i class="far fa-square"></i>
							Priory Ward</div>
						</div>
					</div>
					
				</div>
				<br><br><br>
				<hr>
				<br>
				<table width="50%" align="center">
					<tbody>
					<tr>
						<td width="40%"><img src="images/SatOff.png" id="picSat" onclick="changeLayer('satellite')" height="60px"></td>
						<td width="10%"></td>
						<td width="40%"><img src="images/StreetOn.png" id="picStreet" onclick="changeLayer('streets')" height="60px"></td>
					</tr>
					<tr>
						<td style="vertical-align:top">Satellite View</td>
						<td></td>
						<td style="vertical-align:top">Street View</td>
					</tr>
					</tbody></table>
			</div>

            
        </div>
    </div>

    <div id="mapid" class="sidebar-map"></div>



	<script>
	var mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		mbToken = "pk.eyJ1IjoidG9tcHlzciIsImEiOiJjazFndnplbjkwcmt3M2NxbHZ0OThicjdvIn0.PMGP9s0F7ldLt2HxTQDkSg",
		mbUrl = "https://api.mapbox.com/styles/v1/mapbox/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}";
		MINzoom = 14;
		if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)) {
		MINzoom -= 2;
		console.log("mobile device");
		}

	var streets = L.tileLayer(mbUrl, {
		attribution: mbAttr,
		accessToken: 'pk.eyJ1IjoidG9tcHlzciIsImEiOiJjazFndnplbjkwcmt3M2NxbHZ0OThicjdvIn0.PMGP9s0F7ldLt2HxTQDkSg',
		maxZoom: 18,
		tileSize: 512,
		zoomOffset: -1,
		id: 'streets-v11',	
		minZoom: MINzoom
		//detectRetina: true
		});
		

	var satellite = L.tileLayer(mbUrl, {
		attribution: mbAttr,
		accessToken: 'pk.eyJ1IjoidG9tcHlzciIsImEiOiJjazFndnplbjkwcmt3M2NxbHZ0OThicjdvIn0.PMGP9s0F7ldLt2HxTQDkSg',
		maxZoom: 18,
		tileSize: 512,
		zoomOffset: -1,
		id: 'satellite-streets-v9',	
		minZoom: MINzoom
		//detectRetina: true
		});
		
	var mymap = L.map('mapid', {
			center: [51.539829, -0.195229],
			zoom: 15,
			layers: [streets],
			zoomControl: false
	});
	
	var baseMaps = {
			"Default View": streets,
			"satellite View": satellite
	};

	// var layerControl = L.control.layers(baseMaps, null, {position: 'topleft'}).addTo(mymap);
	</script>
	<script>
		// Zoom buttons
		function zoomin(){
			mymap.zoomIn(1)
		}
		function zoomout(){
			mymap.zoomOut(1)
		}
		
		// Button Show/Hide
		function toggleHidden(divName) {
			var x = document.getElementById(divName);
			if (x.style.display === "none") {
				x.style.display = "block";
			} else {
				x.style.display = "none";
			}
		} 	
		
		//icon images
		var imageSat = document.getElementById('picSat');
		var imageStreet = document.getElementById('picStreet');
		//Changing Base Layers
		function changeLayer(layerName){
			switch(layerName){
				case "satellite":
				imageSat.src = "images/SatOn.png";
				imageStreet.src = "images/StreetOff.png";
				mymap.removeLayer(streets);
				mymap.addLayer(satellite);
				break;
				
				case "streets":
				imageStreet.src = "images/StreetOn.png";
				imageSat.src = "images/SatOff.png";
				mymap.removeLayer(satellite);
				mymap.addLayer(streets);
			}
		}
		
		//Change + to - 
		var i;
		for (i = 2; i < 7; i++) {
			$('#Div'+i.toString()+' button').click(function(){
			$(this).next().next('div').slideToggle('500');
			$(this).find('i').toggleClass('fa-plus fa-minus')
			});
		} 
		
		//Test jquery
		$('#Div7').children('i').click(function(){
			$(this).nextUntil('i', '').next('div').slideToggle('500');
			$(this).toggleClass('fa-plus fa-minus')
			});
		//jquery toggle tick
		$('#Div7').children('div').first().click(function(){
			var parent = $(this).children('i');
			parent.toggleClass('fa-square fa-check-square');
			var parClass = parent.attr('class');
			$('#Div7').children('div').not($(this)).find('i').each(function(){
					$(this).attr('class',parClass);
				});
			
			
			});
		// jquery using class
			// changing icons
		function updateIcons(){
			$(".l3checkP").each(function(){
			//CheckBox Behaviour
				var e = $(this);
				var f = e.siblings().find(".l4check");
				e.removeClass("C2");
				if((f.not(".C1").length > 0) && (f.filter(".C1").length > 0)){
					e.removeClass("C0");
					e.addClass("C2");
				}else if(f.not(".C1").length == 0){
					if (!e.hasClass("C0")){
						e.toggleClass('C0').removeClass('C2')
					}
				}else if(f.filter(".C1").length == 0){
					if (!e.hasClass("C0")){
						e.removeClass('C0').removeClass('C2')
					}
				}
		
				if(e.hasClass('C0')){
					e.children('i').attr('class', 'far fa-check-square');
				}else if(e.hasClass('C2')){
					e.children('i').attr('class', 'far fa-minus-square');
				}else{
					e.children('i').attr('class', 'far fa-square');
				}
				
				f.each(function(){
					if($(this).hasClass('C1')){
						$(this).children('i').attr('class', 'far fa-check-square');
					}else{
						$(this).children('i').attr('class', 'far fa-square');
					}
					});
			//Changing Layers
				});
			<!-- var e = $(".l4check"); -->
			<!-- mymap.removeLayer(L1947); -->
			<!-- e.each(function(){ -->
				<!-- if(!$(this).hasClass('C1')){ -->
					<!-- mymap.removeLayer(L1947); -->
				<!-- }else{ -->
					<!-- console.log($(this).attr('id')); -->
					<!-- mymap.addLayer(L1947); -->
				<!-- } -->
			<!-- }); -->
			e = $(".l4check");
			if(e.eq(0).hasClass('C1')){
				mymap.addLayer(Layer1_2);
			}else{mymap.removeLayer(Layer1_2);}
			if(e.eq(1).hasClass('C1')){
				mymap.addLayer(Layer1_1);
			}else{mymap.removeLayer(Layer1_1);}
		}
			// click
		var Element = $(".l3checkP");
		Element.prev('i').click(function(event){
			event.stopPropagation();
			event.stopImmediatePropagation();
			$(this).nextUntil('i', '').next('div').slideToggle('500');
			$(this).toggleClass('fa-plus fa-minus')
			});
		$(".l3checkP").click(function(event){
			event.stopPropagation();
			event.stopImmediatePropagation();
			var Element = $(this);
			$(this).toggleClass('C0').removeClass('C2');
			$(this).siblings('div').children('div').each(function(){
					if(Element.hasClass('C0')){
						$(this).addClass('C1');
					}else{
						$(this).removeClass('C1');
					}
					});
			updateIcons();
			});
		$(".l4check").click(function(){
			$(this).toggleClass('C1');
			updateIcons();
			});
		
		
		
		
			
 	<!-- mymap.setMaxBounds([ -->
		<!-- [51.550552, -0.218611], -->
		<!-- [51.530426, -0.177397] -->
		<!-- ]);  -->
	<!--} -->



	</script>
	
	<script>
        // create the sidebar instance and add it to the map
        var sidebar = L.control.sidebar('sidebar')
            .addTo(mymap);
    
	</script>
	
	<script src="Markers.js"></script>

	</body>
</html>
